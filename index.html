<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØªØ³Ø¬ÙŠÙ„ Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø¹Ù‡Ø¯ Ø§Ù„ØªÙ‚Ø§Ù†ÙŠ Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ</title>

  <style>
    body {
      font-family: "Cairo", sans-serif;
      background: linear-gradient(135deg, #dff2ff, #ffffff);
      direction: rtl;
      text-align: center;
      padding: 25px;
      margin: 0;
    }

    form, #resultPage {
      background: #ffffff;
      padding: 30px 25px;
      max-width: 480px;
      margin: auto;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.12);
      transition: 0.3s;
    }

    h2 { margin-bottom: 25px; color:#005a8d; }
    h3 { margin-bottom: 18px; }

    input, select {
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      border-radius: 12px;
      border: 1px solid #ccc;
      font-size: 16px;
      transition: 0.3s;
    }

    input:focus, select:focus {
      border-color: #0088cc;
      box-shadow: 0 0 6px rgba(0,136,204,0.4);
      outline: none;
    }

    button {
      background: linear-gradient(90deg, #007bff, #00aaff);
      color: white;
      padding: 14px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      width: 100%;
      font-size: 17px;
      font-weight: bold;
      margin-top: 10px;
      transition: 0.25s;
    }

    button:hover {
      background: linear-gradient(90deg, #0066cc, #0099dd);
      transform: translateY(-2px);
    }

    /* ØµÙ†Ø¯ÙˆÙ‚ Ø±Ø§Ø¨Ø· Ø§Ù„ØªÙ„ØºØ±Ø§Ù… */
    .link-box {
      background: #e9f5ff;
      border: 1px solid #b3e0ff;
      padding: 18px;
      border-radius: 15px;
      margin-top: 20px;
    }

    .telegram-link {
      display: inline-block;
      background: #0088cc;
      color: white;
      padding: 13px 25px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: bold;
      transition: 0.3s;
    }

    .telegram-link:hover {
      background: #007ab8;
      transform: translateY(-2px);
    }

    /* Ø³Ø¨ÙŠÙ†Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
    .loading {
      width: 35px;
      height: 35px;
      border: 4px solid #ddd;
      border-top: 4px solid #007bff;
      border-radius: 50%;
      animation: spin 0.9s linear infinite;
      margin: 10px auto;
      display: none;
    }

    @keyframes spin {
      100% { transform: rotate(360deg); }
    }

    /* Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ */
    .success-msg {
      background: #e8ffe8;
      padding: 12px;
      border-radius: 10px;
      font-weight: bold;
      color: #0a7d0a;
      display: none;
      margin-bottom: 10px;
    }

    /* Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ */
    .error-msg {
      background: #ffe5e5;
      padding: 12px;
      border-radius: 10px;
      font-weight: bold;
      color: #d60000;
      display: none;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<h2>ğŸ“‹ Ø§Ø³ØªÙ…Ø§Ø±Ø© ØªØ³Ø¬ÙŠÙ„ Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø¹Ù‡Ø¯ Ø§Ù„ØªÙ‚Ø§Ù†ÙŠ Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ</h2>

<form id="studentForm">

  <div class="error-msg" id="errorMessage">âš  ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.</div>
  <div class="success-msg" id="successMessage">â³ Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ...</div>

  <input type="text" name="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" required>

  <input type="text" name="studentID" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ" required pattern="[0-9]{4,12}" title="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·">

  <input type="tel" name="telegramPhone" placeholder="Ø±Ù‚Ù… Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø§Ù„ØªÙ„ØºØ±Ø§Ù…" required pattern="[0-9+]{7,15}" title="Ø§Ù„Ø±Ù‚Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·">

  <input type="text" name="telegramUser" placeholder="ÙŠÙˆØ²Ø± Ø§Ù„ØªÙ„ØºØ±Ø§Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">

  <input type="email" name="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">

  <select name="department" required>
    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
    <option value="Ø§Ù„Ø¹Ù…Ø§Ø±Ø©">Ø§Ù„Ø¹Ù…Ø§Ø±Ø©</option>
    <option value="Ø§Ù„Ù…Ø³Ø§Ø­Ø©">Ø§Ù„Ù…Ø³Ø§Ø­Ø©</option>
    <option value="Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡Ø§Øª">Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡Ø§Øª</option>
    <option value="Ø§Ù„ØµØ­ÙŠØ© ÙˆØ§Ù„Ù…Ø§Ø¦ÙŠØ©">Ø§Ù„ØµØ­ÙŠØ© ÙˆØ§Ù„Ù…Ø§Ø¦ÙŠØ©</option>
  </select>

  <select name="year" required>
    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</option>
    <option value="Ø§Ù„Ø£ÙˆÙ„Ù‰">Ø§Ù„Ø£ÙˆÙ„Ù‰</option>
    <option value="Ø§Ù„Ø«Ø§Ù†ÙŠØ©">Ø§Ù„Ø«Ø§Ù†ÙŠØ©</option>
  </select>

  <button type="submit">Ø§Ù„ØªØ§Ù„ÙŠ âœ</button>

  <div class="loading" id="loadingSpinner"></div>

</form>

<div id="resultPage" style="display:none;">
  <h3>âœ… ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­ ÙŠØ§ Ø·Ø§Ù„Ø¨Ù†Ø§ Ø§Ù„Ø¹Ø²ÙŠØ²!</h3>
  <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ø¯Ù†Ø§Ù‡ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù‚Ø³Ù…Ùƒ ÙÙŠ Ø§Ù„ØªÙ„ØºØ±Ø§Ù… ğŸ‘‡</p>

  <div class="link-box">
    <a id="telegramGroupLink" class="telegram-link" href="#" target="_blank">Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</a>
  </div>
</div>

<script>
  const sheetdb_api_url = "https://sheetdb.io/api/v1/o3if7qrz8mhg5";

  const telegramLinks = {
    "Ø§Ù„Ø¹Ù…Ø§Ø±Ø©": { "Ø§Ù„Ø£ÙˆÙ„Ù‰": "https://t.me/+-9YyfrTi02RkZGM8", "Ø§Ù„Ø«Ø§Ù†ÙŠØ©": "https://t.me/+vL_6K93_ot4yMGJk" },
    "Ø§Ù„Ù…Ø³Ø§Ø­Ø©": { "Ø§Ù„Ø£ÙˆÙ„Ù‰": "https://t.me/+dCHlpX3rWacyY2Zk", "Ø§Ù„Ø«Ø§Ù†ÙŠØ©": "https://t.me/+bqNv7qTvSZxiN2Nk" },
    "Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡Ø§Øª": { "Ø§Ù„Ø£ÙˆÙ„Ù‰": "https://t.me/+giuMhy3-cddiOTJk", "Ø§Ù„Ø«Ø§Ù†ÙŠØ©": "https://t.me/+lJWLUMGhr7BmMWU0" },
    "Ø§Ù„ØµØ­ÙŠØ© ÙˆØ§Ù„Ù…Ø§Ø¦ÙŠØ©": { "Ø§Ù„Ø£ÙˆÙ„Ù‰": "https://t.me/+75uYam8rw6Y3ZDA0", "Ø§Ù„Ø«Ø§Ù†ÙŠØ©": "https://t.me/+vO4kH2R7O38zMmQ0" }
  };

  const form = document.getElementById("studentForm");
  const resultPage = document.getElementById("resultPage");
  const telegramLink = document.getElementById("telegramGroupLink");

  const errorMsg = document.getElementById("errorMessage");
  const successMsg = document.getElementById("successMessage");
  const spinner = document.getElementById("loadingSpinner");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
    errorMsg.style.display = "none";
    successMsg.style.display = "none";

    // ÙØ­Øµ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø­Ù‚ÙˆÙ„
    if (!form.checkValidity()) {
      errorMsg.style.display = "block";
      return;
    }

    successMsg.style.display = "block";
    spinner.style.display = "block";

    // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    const data = Object.fromEntries(new FormData(form).entries());
    data.timestamp = new Date().toLocaleString();

    // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ SheetDB
    const response = await fetch(sheetdb_api_url, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ data: [data] })
    });

    spinner.style.display = "none";

    if (response.ok) {
      form.style.display = "none";
      resultPage.style.display = "block";

      telegramLink.href =
        telegramLinks[data.department]?.[data.year] || "#";

    } else {
      errorMsg.textContent = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¬Ø¯Ø¯Ù‹Ø§.";
      errorMsg.style.display = "block";
    }
  });
</script>

</body>
</html>
